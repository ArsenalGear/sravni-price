$(function(){function a(a){var c=""!=a.name&&a.name?a.name:"\u0413\u043E\u0441\u0442\u044C",d=""!=a.comment&&a.comment?a.comment:"",e=""!=a.advantages&&a.advantages?a.advantages:"",f=""!=a.limitations&&a.limitations?a.limitations:"",g=""!=a.experience_of_using&&a.experience_of_using?a.experience_of_using:"",h="";for($i=0;5>$i;$i++)h+=$i+1<=a.rate?"<img class=\"rating__star\" src=\"/img/theme/icons/star_checked.png\" alt=\"\" role=\"presentation\" />":"<img class=\"rating__star\" src=\"/img/theme/icons/star_unchecked.png\" alt=\"\" role=\"presentation\" />";var i="<div class=\"feed-card\">\n                            <div class=\"row\">\n                                <div class=\"col-12 col-md-4\">\n                                    <div class=\"feed-card__name-n-date\">\n                                        <p class=\"feed-card__name\">"+c+"</p><span class=\"feed-card__divide\">|</span>\n                                        <p class=\"feed-card__time\"><time>"+a.time+"</time></p>\n                                    </div>\n                                    <div class=\"feed-card__mark-block\">\n                                        <p class=\"feed-card__mark-word\">\u041E\u0446\u0435\u043D\u043A\u0430</p>\n                                        <div class=\"feed-card__mark-wrap\"><span class=\"feed-card__mark\">"+a.rate+"</span>\n                                            <div class=\"rating\">\n                                                <div class=\"rating__stars-block\" style=\"font-size: 0\">\n"+h+"                                                </div>                                                <p class=\"rating__choice-title\">"+b(a.rate)+"</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"col-12 col-md-8\">\n";return i+=1==a.recommended?"<p class=\"feed-card__recommend-accept\">\u0420\u0435\u043A\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u044E \u043F\u043E\u043A\u0443\u043F\u043A\u0443</p>\n":"<p class=\"feed-card__recommend-reject\">\u041D\u0435\xA0\u0440\u0435\u043A\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u044E \u043F\u043E\u043A\u0443\u043F\u043A\u0443</p>\n",i+="<p class=\"feed-card__reccomend-desc\">"+d+"</p></div>\n<div class=\"feed-card__bottom-block\">\n                                    <div class=\"col-12 col-xl-4 order-xl-1 order-lg-2 order-md-2 order-sm-2 order-2\">\n                                        <div class=\"feed-card__useful-block\">\u041F\u043E\u043B\u0435\u0437\u0435\u043D&nbsp;\u043B\u0438 \u043E\u0442\u0437\u044B\u0432? <p class=\"feed-card__useful-title\"></p>\n                                            <div class=\"feed-card__useful-btn-block\"><label class=\"feed-card__useful-btn button active\"><input class=\"feed-card__usefull-input usefull-btn\" type=\"radio\" checked=\"checked\" name=\"feed1\"><span class=\"feed-card__useful-span\">\u0414\u0430</span></label><label class=\"feed-card__useful-btn button\"><input class=\"feed-card__usefull-input not-usefull-btn\" type=\"radio\" name=\"feed2\"><span class=\"feed-card__useful-span\">\u041D\u0435\u0442</span></label></div>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-12 col-xl-8 d-flex flex-wrap align-items-center order-xl-2 order-lg-1 order-md-1 order-sm-1 order-1\">\n<div class=\"feed-card__liked-row\"><span class=\"feed-card__liked-status\">\u041F\u043E\u043D\u0440\u0430\u0432\u0438\u043B\u043E\u0441\u044C</span>\n                                            <p class=\"feed-card__liked-desc\">"+e+"</p>\n                                        </div>\n<div class=\"feed-card__liked-row\"><span class=\"feed-card__disliked-status\">\u041D\u0435&nbsp;\u043F\u043E\u043D\u0440\u0430\u0432\u0438\u043B\u043E\u0441\u044C</span>\n                                            <p class=\"feed-card__liked-desc\">"+f+"</p>\n                                        </div>\n<div class=\"feed-card__liked-row\"><span class=\"feed-card__exp-status\">\u041E\u043F\u044B\u0442 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F</span>\n                                                <p class=\"feed-card__liked-desc\">"+g+"</p>\n                                            </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>",i}function b(a){switch(a){case 1:return"\u041E\u0447\u0435\u043D\u044C \u043F\u043B\u043E\u0445\u043E";break;case 2:return"\u0422\u0430\u043A \u0441\u0435\u0431\u0435";break;case 3:return"\u0423\u0434\u043E\u0432\u043B\u0435\u0442\u0432\u043E\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E";break;case 4:return"\u041F\u043E\u0445\u0432\u0430\u043B\u044C\u043D\u043E";break;case 5:return"\u041E\u0442\u043B\u0438\u0447\u043D\u043E";}}$(function(){$(window).scroll(function(){0==$(this).scrollTop()?$("#toTop").fadeOut():$("#toTop").fadeIn()}),$("#toTop").click(function(){$("body,html").animate({scrollTop:0},800)})}),$(".anchor-link").on("click",function(){var a=$(this).attr("href"),b=$(a).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:b},1e3),!1}),$(".feed-card__useful-btn").on("click",function(){$(this).find("input[checked]")&&($(this).closest(".feed-card__useful-btn-block").find(".feed-card__useful-btn").removeClass("active"),$(this).addClass("active"))}),0<$("input, textarea").length&&$("input, textarea").focus(function(){$(this).data("placeholder",$(this).attr("placeholder")).attr("placeholder","")}).blur(function(){$(this).attr("placeholder",$(this).data("placeholder"))}),0<$("input[type=tel]").length&&$("input[type=tel]").mask("+7 (999) 999 99 99"),$("#menuBtn").on("click",function(a){a.preventDefault(),991>=$(window).width()?($(this).toggleClass("menu-btn_active"),$(".drop-down").toggleClass("hidden").toggleClass("nav-opacity"),$("#drop-down").animate({width:"100%"},300),$("header, main").toggleClass("opacity")):($(this).toggleClass("menu-btn_active"),$(".drop-down").toggleClass("hidden"))}),$(".modal__close-modal").on("click",function(){$("#drop-down").animate({width:"1%"},300),setTimeout(function(){$(".drop-down").toggleClass("hidden").toggleClass("nav-opacity")},290),$("#menuBtn").toggleClass("menu-btn_active"),$("header, main").toggleClass("opacity")}),$("#goodSlider").slick({autoplay:!1,dots:!0,arrows:!1,customPaging:function(a,b){var c=$(a.$slides[b]).find("img");return"<a><img src=\""+c[0].currentSrc+"\"></a>"}}),$("#popular-slider").slick({autoplaySpeed:3e3,pauseOnHover:!0,slidesToShow:4,slidesToScroll:1,speed:200,infinite:!0,arrows:!0,adaptiveHeight:!0,cssEase:"linear",responsive:[{breakpoint:991,settings:{arrows:!1,slidesToShow:3,slidesToScroll:1}},{breakpoint:768,settings:{arrows:!1,slidesToShow:2,slidesToScroll:1,dots:!1}},{breakpoint:568,settings:{arrows:!1,slidesToShow:2,slidesToScroll:1,dots:!1}}]}),$("#search-input").focus(function(){$("#overlay").show(),$(".header__search").addClass("input-overlay")}),$("#overlay").on("click",function(){$(this).hide()}),$(".sub-footer__add-shop").magnificPopup({preloader:!0,focus:"#fio",callbacks:{beforeOpen:function(){this.st.focus=!(700>$(window).width())&&"#name"}}}),$(".shop-add__shop-card-no-border").magnificPopup({preloader:!0,focus:"#fio",callbacks:{beforeOpen:function(){700>$(window).width()?($("#addShop").find("button").css("pointer-events","unset"),this.st.focus=!1):($("#addShop").find("button").css("pointer-events","unset"),this.st.focus="#name")}}}),$("#countrySelect").on("change",function(){changeRegion()}),$(".header__select-block").magnificPopup({preloader:!0,callbacks:{beforeOpen:function(){getRegions(),this.st.focus=!(700>$(window).width())&&"#name"}}}),$("body").on("click",".add-shop__region",function(){var a=$(this).text();$(".header__select").text(a)}),$("body").on("click",".add-shop__region",function(){let a=new URL(window.location.href),b=a.hostname,c=b.split("."),d=$(this).attr("data-slug"),e=window.location.search;if(2==c.length)var f=a.protocol+"//"+d+"."+b+a.pathname;else var f=a.protocol+"//"+d+"."+c[1]+"."+c[2]+a.pathname;""!==e&&(f+=e),location.href=f,$.magnificPopup.close(),$("#countrySelect").find("option").remove()}),$("body").on("click",".add-shop__close",function(){$.magnificPopup.close(),$("#countrySelect").find("option").remove()}),$(function(){function a(){var a=$(".rating-container img.rating-chosen").length;$("#mark").text(a),$("#rate").val(a)}$(".rating-container > .rating-star").mouseenter(function(){$(this).prevAll().addBack().addClass("rating-hover").attr("src","/img/theme/icons/star_checked.png"),$(this).nextAll().removeClass("rating-hover").addClass("no-rating").attr("src","/img/theme/icons/star_unchecked.png"),$(".meaning").fadeIn("fast")}),$(".rating-container > .rating-star").mouseleave(function(){$(this).nextAll().removeClass("no-rating").attr("src","/img/theme/icons/star_unchecked.png")}),$(".rating-container").mouseleave(function(){$(".rating-star").each(function(){$(this).hasClass("rating-chosen")?$(this).addClass("rating-hover").attr("src","/img/theme/icons/star_checked.png"):$(this).removeClass("rating-hover").attr("src","/img/theme/icons/star_unchecked.png")}),$(".meaning").fadeOut("fast")}),$(".rating-container > .rating-star").click(function(){$(this).prevAll().addBack().addClass("rating-chosen").attr("src","/img/theme/icons/star_checked.png"),$(this).nextAll().removeClass("rating-chosen").attr("src","/img/theme/icons/star_unchecked.png")}),$(".rating-container > .add-feed__star").hover(function(){var a=$(this).attr("data-feed"),b=$(this).attr("data-rating");$(this).closest(".rating-container").next(".consult-feed__meaning-block").find(".meaning").text(a),$("#mark").text(b),$("#rate").val(b)}),$(".rating-container > .add-feed__star").mouseout(function(){a(),$(this).closest(".rating-container").next(".consult-feed__meaning-block").find(".meaning").text("")})});$(document).ready(function(){var a=$(".title-goods__title").text();location.origin.indexOf("localhost")+1||$.get("https://www.googleapis.com/youtube/v3/search",{part:"id,snippet",q:a,maxResults:1,key:"AIzaSyBUwoygkjeMNedXX1NKFdsL8zu-foc-3TM"},function(a){console.log(a),videoId=a.items[0].id.videoId,output="<iframe frameborder=\"0\" height=\""+236+"\" width=\""+420+"\" src=\"//www.youtube.com/embed/"+videoId+"\"></iframe>",$(".video__video-block").html(output),$("#video").show()})}),$("body").on("submit","#addFeed",function(a){a.preventDefault();var b=$("#addFeed").serialize(),c=grecaptcha.getResponse();c.length?($("#recaptchaError").text(""),grecaptcha.reset(),$.ajax({method:"POST",url:"/create-review/"+productId,data:b,success:function(){$.magnificPopup.open({items:{src:"#thanks"}})},error:function(){$.magnificPopup.open({items:{src:"#errorModal"}})}})):($("#recaptchaError").text("* \u0412\u044B \u043D\u0435 \u043F\u0440\u043E\u0448\u043B\u0438 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443 \"\u042F \u043D\u0435 \u0440\u043E\u0431\u043E\u0442\""),grecaptcha.reset())}),$("body").on("click",".pagination__item, .pagination__arrow-left, .pagination__arrow-right",function(b){b.preventDefault();var c="";$.ajax({type:"GET",url:$(this).find("a").attr("href"),success:b=>{$(".pagination").replaceWith(b.pagination),b.items.forEach(function(b){c+=a(b)}),$(".feed__wrapper").html(c),$("html,body").animate({scrollTop:$("#feed").offset().top},800)}})}),$(".price-block__button").click(function(a){a.preventDefault(),$(".price-block__button, .price-block__shop-count").hide(),$("#price").find(".row").show()})});
